!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function i(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function a(e){return document.createTextNode(e)}function f(){return a(" ")}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.data!==t&&(e.data=t)}function g(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function m(e,t,n){e.classList.toggle(t,!!n)}let h;function x(e){h=e}function v(){if(!h)throw new Error("Function called outside component initialization");return h}function y(e){v().$$.on_mount.push(e)}function b(){const e=v();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}(t,n,{cancelable:o});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}const w=[],E=[];let _=[];const R=[],k=Promise.resolve();let S=!1;function P(e){_.push(e)}const L=new Set;let C=0;function M(){if(0!==C)return;const e=h;do{try{for(;C<w.length;){const e=w[C];C++,x(e),T(e.$$)}}catch(e){throw w.length=0,C=0,e}for(x(null),w.length=0,C=0;E.length;)E.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];L.has(t)||(L.add(t),t())}_.length=0}while(w.length);for(;R.length;)R.pop()();S=!1,L.clear(),x(e)}function T(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(P)}}const j=new Set;let q;function N(){q={r:0,c:[],p:q}}function A(){q.r||o(q.c),q=q.p}function O(e,t){e&&e.i&&(j.delete(e),e.i(t))}function H(e,t,n,o){if(e&&e.o){if(j.has(e))return;j.add(e),q.c.push((()=>{j.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function I(e){e&&e.c()}function B(e,n,s){const{fragment:c,after_update:i}=e.$$;c&&c.m(n,s),P((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),i.forEach(P)}function F(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];_.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),_=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function z(e,t){-1===e.$$.dirty[0]&&(w.push(e),S||(S=!0,k.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function D(t,r,s,c,i,l,u=null,a=[-1]){const f=h;x(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:r.target||f.$$.root};u&&u(p.root);let $=!1;if(p.ctx=s?s(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),$&&z(t,e)),n})):[],p.update(),$=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(d)}else p.fragment&&p.fragment.c();r.intro&&O(t.$$.fragment),B(t,r.target,r.anchor),M()}x(f)}class U{$$=void 0;$$set=void 0;$destroy(){F(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Y(e){let t,n,o,r;const s=e[3].default,i=function(e,t,n,o){if(e){const r=c(e,t,n,o);return e[0](r)}}(s,e,e[2],null);return{c(){t=u("div"),i&&i.c(),p(t,"class","speed-reader-popup svelte-x1iw7q"),m(t,"expanded",e[0])},m(s,c){var d,u,a,f;l(s,t,c),i&&i.m(t,null),n=!0,o||(d=t,u="click",a=e[1],d.addEventListener(u,a,f),r=()=>d.removeEventListener(u,a,f),o=!0)},p(e,[o]){i&&i.p&&(!n||4&o)&&function(e,t,n,o,r,s){if(r){const i=c(t,n,o,s);e.p(i,r)}}(i,s,e,e[2],n?function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(s,e[2],o,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[2]),null),(!n||1&o)&&m(t,"expanded",e[0])},i(e){n||(O(i,e),n=!0)},o(e){H(i,e),n=!1},d(e){e&&d(t),i&&i.d(e),o=!1,r()}}}function G(e,t,n){let{$$slots:o={},$$scope:r}=t,{isExpanded:s=!1}=t;const c=b();return y((()=>{console.log("Popup component mounted")})),e.$$set=e=>{"isExpanded"in e&&n(0,s=e.isExpanded),"$$scope"in e&&n(2,r=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&console.log("Popup isExpanded changed:",s)},[s,function(){console.log("Popup clicked"),c("click")},r,o]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class J extends U{constructor(e){super(),D(this,e,G,Y,s,{isExpanded:0})}}function K(t){let n,o;return{c(){n=u("span"),o=a(t[0]),p(n,"class","speed-reader-before svelte-15ms0k2")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&$(o,e[0])},i:e,o:e,d(e){e&&d(n)}}}function Q(e,t,n){let{before:o=""}=t;return e.$$set=e=>{"before"in e&&n(0,o=e.before)},[o]}class V extends U{constructor(e){super(),D(this,e,Q,K,s,{before:0})}}function W(t){let n,o;return{c(){n=u("span"),o=a(t[0]),p(n,"class","speed-reader-center svelte-44q5p0")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&$(o,e[0])},i:e,o:e,d(e){e&&d(n)}}}function X(e,t,n){let{center:o=""}=t;return e.$$set=e=>{"center"in e&&n(0,o=e.center)},[o]}class Z extends U{constructor(e){super(),D(this,e,X,W,s,{center:0})}}function ee(t){let n,o;return{c(){n=u("span"),o=a(t[0]),p(n,"class","speed-reader-after svelte-jqlppn")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&$(o,e[0])},i:e,o:e,d(e){e&&d(n)}}}function te(e,t,n){let{after:o=""}=t;return e.$$set=e=>{"after"in e&&n(0,o=e.after)},[o]}class ne extends U{constructor(e){super(),D(this,e,te,ee,s,{after:0})}}function oe(t){let n,o;return n=new Z({props:{center:"Click to start"}}),{c(){I(n.$$.fragment)},m(e,t){B(n,e,t),o=!0},p:e,i(e){o||(O(n.$$.fragment,e),o=!0)},o(e){H(n.$$.fragment,e),o=!1},d(e){F(n,e)}}}function re(e){let t,n,o,r,s,c;return t=new V({props:{before:e[0]}}),o=new Z({props:{center:e[1]}}),s=new ne({props:{after:e[2]}}),{c(){I(t.$$.fragment),n=f(),I(o.$$.fragment),r=f(),I(s.$$.fragment)},m(e,i){B(t,e,i),l(e,n,i),B(o,e,i),l(e,r,i),B(s,e,i),c=!0},p(e,n){const r={};1&n&&(r.before=e[0]),t.$set(r);const c={};2&n&&(c.center=e[1]),o.$set(c);const i={};4&n&&(i.after=e[2]),s.$set(i)},i(e){c||(O(t.$$.fragment,e),O(o.$$.fragment,e),O(s.$$.fragment,e),c=!0)},o(e){H(t.$$.fragment,e),H(o.$$.fragment,e),H(s.$$.fragment,e),c=!1},d(e){e&&(d(n),d(r)),F(t,e),F(o,e),F(s,e)}}}function se(e){let t,n,o,r,s,c;const a=[re,oe],$=[];function g(e,t){return e[3]||e[1]&&"Click to start"!==e[1]?0:1}return r=g(e),s=$[r]=a[r](e),{c(){t=u("div"),n=u("div"),o=f(),s.c(),p(n,"class","speed-reader-line svelte-xsvelt"),p(t,"class","speed-reader-content svelte-xsvelt")},m(e,s){l(e,t,s),i(t,n),i(t,o),$[r].m(t,null),c=!0},p(e,[n]){let o=r;r=g(e),r===o?$[r].p(e,n):(N(),H($[o],1,1,(()=>{$[o]=null})),A(),s=$[r],s?s.p(e,n):(s=$[r]=a[r](e),s.c()),O(s,1),s.m(t,null))},i(e){c||(O(s),c=!0)},o(e){H(s),c=!1},d(e){e&&d(t),$[r].d()}}}function ce(e,t,n){let{before:o=""}=t,{center:r=""}=t,{after:s=""}=t,{isReading:c=!1}=t;return e.$$set=e=>{"before"in e&&n(0,o=e.before),"center"in e&&n(1,r=e.center),"after"in e&&n(2,s=e.after),"isReading"in e&&n(3,c=e.isReading)},[o,r,s,c]}class ie extends U{constructor(e){super(),D(this,e,ce,se,s,{before:0,center:1,after:2,isReading:3})}}function le(t){let n;return{c(){n=u("div"),p(n,"class","speed-reader-progress svelte-1r2yrqc"),g(n,"width",t[0]+"%")},m(e,t){l(e,n,t)},p(e,[t]){1&t&&g(n,"width",e[0]+"%")},i:e,o:e,d(e){e&&d(n)}}}function de(e,t,n){let{progress:o=0}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress)},[o]}class ue extends U{constructor(e){super(),D(this,e,de,le,s,{progress:0})}}function ae(t){let n;return{c(){n=u("div"),n.textContent="SR",p(n,"class","small-icon")},m(e,t){l(e,n,t)},p:e,i:e,o:e,d(e){e&&d(n)}}}function fe(e){let t,n,o,r;return t=new ie({props:{before:e[1].before,center:e[1].center,after:e[1].after,isReading:e[3]}}),o=new ue({props:{progress:e[2]}}),{c(){I(t.$$.fragment),n=f(),I(o.$$.fragment)},m(e,s){B(t,e,s),l(e,n,s),B(o,e,s),r=!0},p(e,n){const r={};2&n&&(r.before=e[1].before),2&n&&(r.center=e[1].center),2&n&&(r.after=e[1].after),8&n&&(r.isReading=e[3]),t.$set(r);const s={};4&n&&(s.progress=e[2]),o.$set(s)},i(e){r||(O(t.$$.fragment,e),O(o.$$.fragment,e),r=!0)},o(e){H(t.$$.fragment,e),H(o.$$.fragment,e),r=!1},d(e){e&&d(n),F(t,e),F(o,e)}}}function pe(e){let t,n,o,r;const s=[fe,ae],c=[];function i(e,t){return e[0]?0:1}return t=i(e),n=c[t]=s[t](e),{c(){n.c(),o=a("")},m(e,n){c[t].m(e,n),l(e,o,n),r=!0},p(e,r){let l=t;t=i(e),t===l?c[t].p(e,r):(N(),H(c[l],1,1,(()=>{c[l]=null})),A(),n=c[t],n?n.p(e,r):(n=c[t]=s[t](e),n.c()),O(n,1),n.m(o.parentNode,o))},i(e){r||(O(n),r=!0)},o(e){H(n),r=!1},d(e){e&&d(o),c[t].d(e)}}}function $e(e){let t,n;return t=new J({props:{isExpanded:e[0],$$slots:{default:[pe]},$$scope:{ctx:e}}}),t.$on("click",e[4]),{c(){I(t.$$.fragment)},m(e,o){B(t,e,o),n=!0},p(e,[n]){const o={};1&n&&(o.isExpanded=e[0]),2063&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){F(t,e)}}}function ge(e,t,n){let o,{words:r=[]}=t,{wordsPerMinute:s=400}=t,{isExpanded:c=!1}=t,i={before:"",center:"",after:""},l=0,d=!1,u=0;function a(){console.log("startReading called"),n(3,d=!0),u=0,o=setInterval((()=>{u<r.length?(n(1,i=function(e){const t=e.length,n=Math.floor((t-1)/2);return{before:e.slice(0,n),center:e[n],after:e.slice(n+1)}}(r[u])),n(2,l=(u+1)/r.length*100),u++):(f(),n(1,i={before:"",center:"Finished",after:""}))}),6e4/s)}function f(){console.log("stopReading called"),n(3,d=!1),clearInterval(o)}var p;return y((()=>{console.log("SpeedReader component mounted")})),p=()=>{o&&clearInterval(o),console.log("SpeedReader component destroyed")},v().$$.on_destroy.push(p),e.$$set=e=>{"words"in e&&n(5,r=e.words),"wordsPerMinute"in e&&n(6,s=e.wordsPerMinute),"isExpanded"in e&&n(0,c=e.isExpanded)},e.$$.update=()=>{1&e.$$.dirty&&console.log("isExpanded changed:",c)},[c,i,l,d,function(){console.log("handleClick called"),c&&(d?f():a())},r,s]}class me extends U{constructor(e){super(),D(this,e,ge,$e,s,{words:5,wordsPerMinute:6,isExpanded:0})}}!function(e){const t=document.createElement("link");t.href=chrome.runtime.getURL(e),t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)}("content.css");let he,xe=null,ve=null,ye=null,be=null,we=!1;function Ee(e){if(console.log("Mouse moved"),_e(e))return we=!0,void clearTimeout(ye);clearTimeout(ve),clearTimeout(ye),ve=setTimeout((()=>{console.log("Hover timeout triggered");const t=e.target,n=t.innerText.split(/\s+/);n.length>=10&&t!==xe?(console.log("Showing SpeedReader"),xe=t,we=!0,function(e,t,n){console.log("showSpeedReader called"),he&&(console.log("Destroying existing SpeedReader"),he.$destroy());const o=t.getBoundingClientRect(),r=o.left+o.width/2-10,s=e.clientY-10;be=document.createElement("div"),document.body.appendChild(be),he=new me({target:be,props:{words:n,wordsPerMinute:400,isExpanded:!1}}),console.log("SpeedReader component created:",he),be.style.position="absolute",be.style.left=`${Math.max(0,r)}px`,be.style.top=`${s}px`,be.style.width="20px",be.style.height="20px",be.style.overflow="hidden",be.style.transition="width 0.3s, height 0.3s",be.addEventListener("mouseenter",(()=>{clearTimeout(ye),we=!0,console.log("Expanding SpeedReader"),he&&be&&(be.style.width="300px",be.style.height="100px",he.$set({isExpanded:!0}))})),be.addEventListener("mouseleave",ke),t.addEventListener("mouseleave",Re)}(e,t,n)):t!==xe&&(console.log("Hiding SpeedReader"),we=!1,Pe())}),300)}function _e(e){return be&&be.contains(e.target)||xe&&xe.contains(e.target)}function Re(e){console.log("Paragraph left"),_e(e)||Se()}function ke(e){console.log("SpeedReader left"),_e(e)||Se(),console.log("Shrinking SpeedReader"),he&&be&&(be.style.width="20px",be.style.height="20px",he.$set({isExpanded:!1}))}function Se(){clearTimeout(ye),ye=setTimeout((()=>{console.log("Hide timeout triggered"),we||Pe()}),1e3)}function Pe(){console.log("hideSpeedReader called"),he&&(he.$destroy(),he=null),be&&(be.remove(),be=null),xe&&(xe.removeEventListener("mouseleave",Re),xe=null),we=!1}document.addEventListener("mousemove",Ee),window.addEventListener("unload",(()=>{document.removeEventListener("mousemove",Ee),Pe()}))}();
//# sourceMappingURL=content.js.map
