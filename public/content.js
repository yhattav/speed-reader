!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function s(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function c(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function i(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function u(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function f(e){return document.createTextNode(e)}function p(){return f(" ")}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function h(e,t,n){e.classList.toggle(t,!!n)}let x;function v(e){x=e}function w(){if(!x)throw new Error("Function called outside component initialization");return x}function y(e){w().$$.on_mount.push(e)}function b(){const e=w();return(t,n,{cancelable:o=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=function(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}(t,n,{cancelable:o});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}const E=[],_=[];let C=[];const k=[],P=Promise.resolve();let R=!1;function L(e){C.push(e)}const S=new Set;let M=0;function j(){if(0!==M)return;const e=x;do{try{for(;M<E.length;){const e=E[M];M++,v(e),T(e.$$)}}catch(e){throw E.length=0,M=0,e}for(v(null),E.length=0,M=0;_.length;)_.pop()();for(let e=0;e<C.length;e+=1){const t=C[e];S.has(t)||(S.add(t),t())}C.length=0}while(E.length);for(;k.length;)k.pop()();R=!1,S.clear(),v(e)}function T(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const N=new Set;let I;function q(){I={r:0,c:[],p:I}}function A(){I.r||o(I.c),I=I.p}function O(e,t){e&&e.i&&(N.delete(e),e.i(t))}function D(e,t,n,o){if(e&&e.o){if(N.has(e))return;N.add(e),I.c.push((()=>{N.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function z(e){e&&e.c()}function F(e,n,s){const{fragment:c,after_update:i}=e.$$;c&&c.m(n,s),L((()=>{const n=e.$$.on_mount.map(t).filter(r);e.$$.on_destroy?e.$$.on_destroy.push(...n):o(n),e.$$.on_mount=[]})),i.forEach(L)}function B(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];C.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),C=t}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function H(e,t){-1===e.$$.dirty[0]&&(E.push(e),R||(R=!0,P.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function U(t,r,s,c,i,l,d=null,u=[-1]){const f=x;v(t);const p=t.$$={fragment:null,ctx:[],props:l,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:r.target||f.$$.root};d&&d(p.root);let $=!1;if(p.ctx=s?s(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&i(p.ctx[e],p.ctx[e]=r)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](r),$&&H(t,e)),n})):[],p.update(),$=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);p.fragment&&p.fragment.l(e),e.forEach(a)}else p.fragment&&p.fragment.c();r.intro&&O(t.$$.fragment),F(t,r.target,r.anchor),j()}v(f)}class W{$$=void 0;$$set=void 0;$destroy(){B(this,1),this.$destroy=e}$on(t,n){if(!r(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function X(t){let n,o,r,s;return{c(){n=u("svg"),o=u("path"),$(o,"d","M0 -10 L0 10"),$(o,"stroke",r="rgb("+t[0]+")"),$(o,"stroke-width",t[2]),$(o,"fill","none"),$(o,"transform",s="\n            rotate("+("right"===t[1]?180+t[4]:t[4])+")\n            scale("+t[3]+" "+t[3]+")\n        "),$(o,"class","svelte-3fqbmu"),$(n,"width","100%"),$(n,"height","100%"),$(n,"viewBox","-15 -15 30 30"),$(n,"class","svelte-3fqbmu")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&r!==(r="rgb("+e[0]+")")&&$(o,"stroke",r),4&t&&$(o,"stroke-width",e[2]),26&t&&s!==(s="\n            rotate("+("right"===e[1]?180+e[4]:e[4])+")\n            scale("+e[3]+" "+e[3]+")\n        ")&&$(o,"transform",s)},i:e,o:e,d(e){e&&a(n)}}}function Y(e,t,n){let o,r,s,{isExpanded:c=!1}=t,{offsetColor:i="255, 69, 0"}=t,{position:l="left"}=t;return e.$$set=e=>{"isExpanded"in e&&n(5,c=e.isExpanded),"offsetColor"in e&&n(0,i=e.offsetColor),"position"in e&&n(1,l=e.position)},e.$$.update=()=>{32&e.$$.dirty&&n(4,o=c?3:20),32&e.$$.dirty&&n(3,r=c?6:1),32&e.$$.dirty&&n(2,s=c?.1:2)},[i,l,s,r,o,c]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");class G extends W{constructor(e){super(),U(this,e,Y,X,s,{isExpanded:5,offsetColor:0,position:1})}}function J(e){let t,n;const o=e[4].default,r=function(e,t,n,o){if(e){const r=c(e,t,n,o);return e[0](r)}}(o,e,e[3],null);return{c(){t=d("div"),r&&r.c(),$(t,"class","content svelte-ugjwt1")},m(e,o){l(e,t,o),r&&r.m(t,null),n=!0},p(e,t){r&&r.p&&(!n||8&t)&&function(e,t,n,o,r,s){if(r){const i=c(t,n,o,s);e.p(i,r)}}(r,o,e,e[3],n?function(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}(o,e[3],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[3]),null)},i(e){n||(O(r,e),n=!0)},o(e){D(r,e),n=!1},d(e){e&&a(t),r&&r.d(e)}}}function K(e){let t,n,o,r,s,c,u,f,g,m;o=new G({props:{isExpanded:e[0],offsetColor:e[1],position:"left"}});let x=e[0]&&J(e);return u=new G({props:{isExpanded:e[0],offsetColor:e[1],position:"right"}}),{c(){t=d("div"),n=d("div"),z(o.$$.fragment),r=p(),x&&x.c(),s=p(),c=d("div"),z(u.$$.fragment),$(n,"class","logo-container left svelte-ugjwt1"),$(c,"class","logo-container right svelte-ugjwt1"),$(t,"class","speed-reader-popup svelte-ugjwt1"),h(t,"expanded",e[0])},m(a,d){var p,$,h,v;l(a,t,d),i(t,n),F(o,n,null),i(t,r),x&&x.m(t,null),i(t,s),i(t,c),F(u,c,null),f=!0,g||(p=t,$="click",h=e[2],p.addEventListener($,h,v),m=()=>p.removeEventListener($,h,v),g=!0)},p(e,[n]){const r={};1&n&&(r.isExpanded=e[0]),2&n&&(r.offsetColor=e[1]),o.$set(r),e[0]?x?(x.p(e,n),1&n&&O(x,1)):(x=J(e),x.c(),O(x,1),x.m(t,s)):x&&(q(),D(x,1,1,(()=>{x=null})),A());const c={};1&n&&(c.isExpanded=e[0]),2&n&&(c.offsetColor=e[1]),u.$set(c),(!f||1&n)&&h(t,"expanded",e[0])},i(e){f||(O(o.$$.fragment,e),O(x),O(u.$$.fragment,e),f=!0)},o(e){D(o.$$.fragment,e),D(x),D(u.$$.fragment,e),f=!1},d(e){e&&a(t),B(o),x&&x.d(),B(u),g=!1,m()}}}function Q(e,t,n){let{$$slots:o={},$$scope:r}=t,{isExpanded:s=!1}=t,{offsetColor:c="255, 69, 0"}=t;const i=b();return y((()=>{console.log("Popup component mounted")})),e.$$set=e=>{"isExpanded"in e&&n(0,s=e.isExpanded),"offsetColor"in e&&n(1,c=e.offsetColor),"$$scope"in e&&n(3,r=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty&&console.log("Popup isExpanded changed:",s)},[s,c,function(){console.log("Popup clicked"),i("click")},r,o]}class V extends W{constructor(e){super(),U(this,e,Q,K,s,{isExpanded:0,offsetColor:1})}}function Z(t){let n,o;return{c(){n=d("span"),o=f(t[0]),$(n,"class","speed-reader-before svelte-15ms0k2")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&g(o,e[0])},i:e,o:e,d(e){e&&a(n)}}}function ee(e,t,n){let{before:o=""}=t;return e.$$set=e=>{"before"in e&&n(0,o=e.before)},[o]}class te extends W{constructor(e){super(),U(this,e,ee,Z,s,{before:0})}}function ne(t){let n,o;return{c(){n=d("span"),o=f(t[0]),$(n,"class","speed-reader-center svelte-1objx8a")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&g(o,e[0])},i:e,o:e,d(e){e&&a(n)}}}function oe(e,t,n){let{center:o=""}=t;return e.$$set=e=>{"center"in e&&n(0,o=e.center)},[o]}class re extends W{constructor(e){super(),U(this,e,oe,ne,s,{center:0})}}function se(t){let n,o;return{c(){n=d("span"),o=f(t[0]),$(n,"class","speed-reader-after svelte-jqlppn")},m(e,t){l(e,n,t),i(n,o)},p(e,[t]){1&t&&g(o,e[0])},i:e,o:e,d(e){e&&a(n)}}}function ce(e,t,n){let{after:o=""}=t;return e.$$set=e=>{"after"in e&&n(0,o=e.after)},[o]}class ie extends W{constructor(e){super(),U(this,e,ce,se,s,{after:0})}}function le(t){let n,o;return n=new re({props:{center:"Click to start"}}),{c(){z(n.$$.fragment)},m(e,t){F(n,e,t),o=!0},p:e,i(e){o||(O(n.$$.fragment,e),o=!0)},o(e){D(n.$$.fragment,e),o=!1},d(e){B(n,e)}}}function ae(e){let t,n,o,r,s,c;return t=new te({props:{before:e[0]}}),o=new re({props:{center:e[1]}}),s=new ie({props:{after:e[2]}}),{c(){z(t.$$.fragment),n=p(),z(o.$$.fragment),r=p(),z(s.$$.fragment)},m(e,i){F(t,e,i),l(e,n,i),F(o,e,i),l(e,r,i),F(s,e,i),c=!0},p(e,n){const r={};1&n&&(r.before=e[0]),t.$set(r);const c={};2&n&&(c.center=e[1]),o.$set(c);const i={};4&n&&(i.after=e[2]),s.$set(i)},i(e){c||(O(t.$$.fragment,e),O(o.$$.fragment,e),O(s.$$.fragment,e),c=!0)},o(e){D(t.$$.fragment,e),D(o.$$.fragment,e),D(s.$$.fragment,e),c=!1},d(e){e&&(a(n),a(r)),B(t,e),B(o,e),B(s,e)}}}function de(e){let t,n,o,r,s,c;const u=[ae,le],f=[];function g(e,t){return e[3]||e[1]&&"Click to start"!==e[1]?0:1}return r=g(e),s=f[r]=u[r](e),{c(){t=d("div"),n=d("div"),o=p(),s.c(),$(n,"class","speed-reader-line svelte-xsvelt"),$(t,"class","speed-reader-content svelte-xsvelt")},m(e,s){l(e,t,s),i(t,n),i(t,o),f[r].m(t,null),c=!0},p(e,[n]){let o=r;r=g(e),r===o?f[r].p(e,n):(q(),D(f[o],1,1,(()=>{f[o]=null})),A(),s=f[r],s?s.p(e,n):(s=f[r]=u[r](e),s.c()),O(s,1),s.m(t,null))},i(e){c||(O(s),c=!0)},o(e){D(s),c=!1},d(e){e&&a(t),f[r].d()}}}function ue(e,t,n){let{before:o=""}=t,{center:r=""}=t,{after:s=""}=t,{isReading:c=!1}=t;return e.$$set=e=>{"before"in e&&n(0,o=e.before),"center"in e&&n(1,r=e.center),"after"in e&&n(2,s=e.after),"isReading"in e&&n(3,c=e.isReading)},[o,r,s,c]}class fe extends W{constructor(e){super(),U(this,e,ue,de,s,{before:0,center:1,after:2,isReading:3})}}function pe(t){let n;return{c(){n=d("div"),$(n,"class","speed-reader-progress svelte-1r2yrqc"),m(n,"width",t[0]+"%")},m(e,t){l(e,n,t)},p(e,[t]){1&t&&m(n,"width",e[0]+"%")},i:e,o:e,d(e){e&&a(n)}}}function $e(e,t,n){let{progress:o=0}=t;return e.$$set=e=>{"progress"in e&&n(0,o=e.progress)},[o]}class ge extends W{constructor(e){super(),U(this,e,$e,pe,s,{progress:0})}}function me(e){let t,n,o,r,s;return n=new fe({props:{before:e[2].before,center:e[2].center,after:e[2].after,isReading:e[4]}}),r=new ge({props:{progress:e[3]}}),{c(){t=d("div"),z(n.$$.fragment),o=p(),z(r.$$.fragment),$(t,"class","content-wrapper svelte-s3gzzj")},m(e,c){l(e,t,c),F(n,t,null),i(t,o),F(r,t,null),s=!0},p(e,t){const o={};4&t&&(o.before=e[2].before),4&t&&(o.center=e[2].center),4&t&&(o.after=e[2].after),16&t&&(o.isReading=e[4]),n.$set(o);const s={};8&t&&(s.progress=e[3]),r.$set(s)},i(e){s||(O(n.$$.fragment,e),O(r.$$.fragment,e),s=!0)},o(e){D(n.$$.fragment,e),D(r.$$.fragment,e),s=!1},d(e){e&&a(t),B(n),B(r)}}}function he(e){let t,n,o=e[0]&&me(e);return{c(){o&&o.c(),t=f("")},m(e,r){o&&o.m(e,r),l(e,t,r),n=!0},p(e,n){e[0]?o?(o.p(e,n),1&n&&O(o,1)):(o=me(e),o.c(),O(o,1),o.m(t.parentNode,t)):o&&(q(),D(o,1,1,(()=>{o=null})),A())},i(e){n||(O(o),n=!0)},o(e){D(o),n=!1},d(e){e&&a(t),o&&o.d(e)}}}function xe(e){let t,n;return t=new V({props:{isExpanded:e[0],offsetColor:e[1],$$slots:{default:[he]},$$scope:{ctx:e}}}),t.$on("click",e[5]),{c(){z(t.$$.fragment)},m(e,o){F(t,e,o),n=!0},p(e,[n]){const o={};1&n&&(o.isExpanded=e[0]),2&n&&(o.offsetColor=e[1]),4125&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){D(t.$$.fragment,e),n=!1},d(e){B(t,e)}}}function ve(e,t,n){let o,{words:r=[]}=t,{wordsPerMinute:s=400}=t,{isExpanded:c=!1}=t,{offsetColor:i="255, 69, 0"}=t,l={before:"",center:"",after:""},a=0,d=!1,u=0;function f(){console.log("startReading called"),n(4,d=!0),u=0,o=setInterval((()=>{u<r.length?(n(2,l=function(e){const t=e.length,n=Math.floor((t-1)/2);return{before:e.slice(0,n),center:e[n],after:e.slice(n+1)}}(r[u])),n(3,a=(u+1)/r.length*100),u++):(p(),n(2,l={before:"",center:"Finished",after:""}))}),6e4/s)}function p(){console.log("stopReading called"),n(4,d=!1),clearInterval(o)}var $;return y((()=>{console.log("SpeedReader component mounted")})),$=()=>{o&&clearInterval(o),console.log("SpeedReader component destroyed")},w().$$.on_destroy.push($),e.$$set=e=>{"words"in e&&n(6,r=e.words),"wordsPerMinute"in e&&n(7,s=e.wordsPerMinute),"isExpanded"in e&&n(0,c=e.isExpanded),"offsetColor"in e&&n(1,i=e.offsetColor)},e.$$.update=()=>{1&e.$$.dirty&&console.log("isExpanded changed:",c)},[c,i,l,a,d,function(){console.log("handleClick called"),c&&(d?p():f())},r,s]}class we extends W{constructor(e){super(),U(this,e,ve,xe,s,{words:6,wordsPerMinute:7,isExpanded:0,offsetColor:1})}}const ye=1e3;function be(e,t){let n;return function(...o){clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),e(...o)}),t)}}let Ee,_e=null,Ce=null,ke=!1,Pe=!1,Re={x:0,y:0},Le=null;function Se(){console.log("Initiating popup removal"),Le?console.log("Removal countdown already initiated"):(console.log(">>>>Initiating removal countdown"),Le=setTimeout((()=>{console.log(">>>>Removal countdown complete"),Te()}),ye),setTimeout((()=>{console.log(">>>>WOULD HAPPEN")}),ye))}function Me(e){Le&&(console.log("Stopping removal countdown",e),clearTimeout(Le),Le=null),ke=!0}function je(e,t){console.log("showPopup called"),Me("because im showing popup"),Ee&&(console.log("Destroying existing SpeedReader"),Ee.$destroy()),Ce=document.createElement("div"),document.body.appendChild(Ce),e.classList.add("paragraph-highlight"),Ee=new we({target:Ce,props:{words:t,wordsPerMinute:400,isExpanded:!1,offsetColor:"255, 69, 0"}}),console.log("SpeedReader component created:",Ee),function(){if(Ce){const e=Re.x+10,t=Re.y+-10;Ce.style.position="fixed",Ce.style.left=`${Math.max(0,e)}px`,Ce.style.top=`${Math.max(0,t)}px`,Ce.style.width="30px",Ce.style.height="30px",Ce.style.overflow="hidden",Ce.style.transition="width 0.3s, height 0.3s"}}(),Ce.addEventListener("mouseenter",(()=>{Pe=!0,ke=!0,console.log("Expanding SpeedReader"),Ee&&Ce&&(Ce.style.width="300px",Ce.style.height="100px",Ee.$set({isExpanded:!0}),_e&&_e.classList.add("expanded"))})),Ce.addEventListener("mouseleave",Ae),e.addEventListener("mouseleave",qe)}function Te(){console.log("hidePopup called"),Ee&&(Ee.$destroy(),Ee=null),Ce&&(Ce.remove(),Ce=null),_e&&(_e.classList.remove("paragraph-highlight","expanded"),_e=null),ke=!1,Le=null}const Ne=be(((e,t)=>{console.log("Debounced show popup"),_e=e,ke=!0,je(e,t)}),ye),Ie=be((()=>{console.log("Debounced hide popup"),ke||Te()}),ye);function qe(e){console.log("Paragraph left"),function(e){return Ce&&Ce.contains(e.target)||_e&&_e.contains(e.target)}(e)||Se()}function Ae(e){console.log("SpeedReader left"),Pe=!1,console.log("Shrinking SpeedReader"),Ee&&Ce&&(Ce.style.width="30px",Ce.style.height="30px",Ee.$set({isExpanded:!1}),_e&&_e.classList.remove("expanded"))}const Oe=function(e,t){let n;return function(...o){n||(e(...o),n=!0,setTimeout((()=>n=!1),t))}}((function(e){console.log("Mouse moved"),Pe?(ke=!0,Me("because im not over the paragraph")):(console.log("Initiating popup removal"),Se()),Re={x:e.clientX,y:e.clientY};const t=document.elementFromPoint(Re.x,Re.y),n=t.innerText.split(/\s+/);n.length>=10&&t!==_e&&Ne(t,n),Ce&&Ie()}),100);document.addEventListener("mousemove",Oe),window.addEventListener("unload",(()=>{document.removeEventListener("mousemove",Oe),Te()}))}();
//# sourceMappingURL=content.js.map
